library ieee;
use ieee.std_logic_1164.all;
entity random_sort is
    port(
        clock     : in std_logic;
        enable    : in std_logic;
        c_clear   : in std_logic;
        r_clear   : in std_logic;
        dado      : out std_logic_vector(3 downto 0)
    );
end entity;

architecture arch of random_sort is

component ram_16x4 is
    port (       
        clk          : in  std_logic;
        endereco     : in  std_logic_vector(3 downto 0);
        dado_entrada : in  std_logic_vector(3 downto 0);
        we           : in  std_logic;
        ce           : in  std_logic;
        dado_saida   : out std_logic_vector(3 downto 0)
     );
end component;

component contador_anel is
    port (
        clock : in  std_logic;
        clr   : in  std_logic;
        ld    : in  std_logic;
        ent   : in  std_logic;
        enp   : in  std_logic;
        D     : in  std_logic_vector (3 downto 0);
        Q     : out std_logic_vector (3 downto 0);
        rco   : out std_logic 
    );
end component;

component registrador_4bits is
    port (
        clock   :  in  std_logic;
        clear   :  in  std_logic;
        enable  : in  std_logic;
        D       :      in  std_logic_vector(3 downto 0);
        Q       :      out std_logic_vector(3 downto 0)
      );
end component;

    signal sig_address : std_logic_vector(3 downto 0);
    signal sig_out     : std_logic_vector(3 downto 0);

    begin

        memoria  : ram_16x4
        port map(
            clk          => clock,
            endereco     => sig_address,
            dado_entrada => "0000",
            we           => '1',
            ce           => enable,
            dado_saida   => sig_out
        );

        contador : contador_anel
        port map(
            clock => clock,
            clr   => c_clear,
            ld    => '1',
            ent   => '1',
            enp   => '1',
            D     => "0000",
            Q     => sig_address,
            rco   => open
        );

        reg_dado : registrador_4bits
        port map(
            clock  => clock,
            clear  => r_clear,
            enable => enable,
            D      => sig_out,
            Q      => dado
        );

end architecture;